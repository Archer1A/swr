# 更新流水线<a name="swr_02_0086"></a>

## 功能介绍<a name="section11868151583918"></a>

更新流水线。

## URI<a name="section38681115113915"></a>

**URI格式**

PUT /v3/manage/pipelines/\{pipeline\_id\}

**表 1**  参数说明

<a name="table19869171553915"></a>
<table><thead align="left"><tr id="row1897561763911"><th class="cellrowborder" valign="top" width="17%" id="mcps1.2.5.1.1"><p id="p19975201714392"><a name="p19975201714392"></a><a name="p19975201714392"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="13%" id="mcps1.2.5.1.2"><p id="p897581713911"><a name="p897581713911"></a><a name="p897581713911"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="16%" id="mcps1.2.5.1.3"><p id="p897511175397"><a name="p897511175397"></a><a name="p897511175397"></a>必选</p>
</th>
<th class="cellrowborder" valign="top" width="54%" id="mcps1.2.5.1.4"><p id="p497501711397"><a name="p497501711397"></a><a name="p497501711397"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row10975717133916"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="p19751217133919"><a name="p19751217133919"></a><a name="p19751217133919"></a>pipeline_id</p>
</td>
<td class="cellrowborder" valign="top" width="13%" headers="mcps1.2.5.1.2 "><p id="p18975217143917"><a name="p18975217143917"></a><a name="p18975217143917"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.3 "><p id="p097513175393"><a name="p097513175393"></a><a name="p097513175393"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="54%" headers="mcps1.2.5.1.4 "><p id="p149751817173915"><a name="p149751817173915"></a><a name="p149751817173915"></a>流水线组名称，租户内唯一。</p>
</td>
</tr>
</tbody>
</table>

## 请求消息<a name="section1487651517396"></a>

**请求参数**

**表 2**  Request Header参数说明

<a name="table9880141519394"></a>
<table><thead align="left"><tr id="row2097831710392"><th class="cellrowborder" valign="top" width="17%" id="mcps1.2.5.1.1"><p id="p199782017193912"><a name="p199782017193912"></a><a name="p199782017193912"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="13%" id="mcps1.2.5.1.2"><p id="p097813176392"><a name="p097813176392"></a><a name="p097813176392"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="16%" id="mcps1.2.5.1.3"><p id="p199781617113917"><a name="p199781617113917"></a><a name="p199781617113917"></a>必选</p>
</th>
<th class="cellrowborder" valign="top" width="54%" id="mcps1.2.5.1.4"><p id="p897816177394"><a name="p897816177394"></a><a name="p897816177394"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row6978101712398"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="p189781217113915"><a name="p189781217113915"></a><a name="p189781217113915"></a>Content-Type</p>
</td>
<td class="cellrowborder" valign="top" width="13%" headers="mcps1.2.5.1.2 "><p id="p17978151703917"><a name="p17978151703917"></a><a name="p17978151703917"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.3 "><p id="p159781617163920"><a name="p159781617163920"></a><a name="p159781617163920"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="54%" headers="mcps1.2.5.1.4 "><p id="p3978117143919"><a name="p3978117143919"></a><a name="p3978117143919"></a>该字段内容填为“application/json;charset=utf8”或者 “application/yaml;charset=utf8”</p>
<p id="p199781717153915"><a name="p199781717153915"></a><a name="p199781717153915"></a>请求可为json/yaml类型</p>
</td>
</tr>
<tr id="row14978131733911"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="p297851717394"><a name="p297851717394"></a><a name="p297851717394"></a>Accept</p>
</td>
<td class="cellrowborder" valign="top" width="13%" headers="mcps1.2.5.1.2 "><p id="p5978151713919"><a name="p5978151713919"></a><a name="p5978151713919"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.3 "><p id="p13978617193917"><a name="p13978617193917"></a><a name="p13978617193917"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="54%" headers="mcps1.2.5.1.4 "><p id="p11978417183914"><a name="p11978417183914"></a><a name="p11978417183914"></a>为“application/json”时返回json类型的响应，默认返回yaml类型的响应</p>
</td>
</tr>
<tr id="row14978101743911"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="p179786174391"><a name="p179786174391"></a><a name="p179786174391"></a>X-Auth-Token</p>
</td>
<td class="cellrowborder" valign="top" width="13%" headers="mcps1.2.5.1.2 "><p id="p139788175393"><a name="p139788175393"></a><a name="p139788175393"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.3 "><p id="p109781817193912"><a name="p109781817193912"></a><a name="p109781817193912"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="54%" headers="mcps1.2.5.1.4 "><p id="p179789177392"><a name="p179789177392"></a><a name="p179789177392"></a>用户Token，需从华为云IAM服务获取。</p>
</td>
</tr>
</tbody>
</table>

**表 3**  Request Body参数说明

<a name="table588861573918"></a>
<table><thead align="left"><tr id="row14979817153913"><th class="cellrowborder" valign="top" width="17.349999999999998%" id="mcps1.2.5.1.1"><p id="p29791417143910"><a name="p29791417143910"></a><a name="p29791417143910"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="12.24%" id="mcps1.2.5.1.2"><p id="p1797981715399"><a name="p1797981715399"></a><a name="p1797981715399"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="15.310000000000002%" id="mcps1.2.5.1.3"><p id="p2097981753920"><a name="p2097981753920"></a><a name="p2097981753920"></a>必选</p>
</th>
<th class="cellrowborder" valign="top" width="55.1%" id="mcps1.2.5.1.4"><p id="p2979217123918"><a name="p2979217123918"></a><a name="p2979217123918"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row29791217173913"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p7979141773910"><a name="p7979141773910"></a><a name="p7979141773910"></a>name</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p1997991743915"><a name="p1997991743915"></a><a name="p1997991743915"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p12979517193918"><a name="p12979517193918"></a><a name="p12979517193918"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p1497981713919"><a name="p1497981713919"></a><a name="p1497981713919"></a>流水线名</p>
</td>
</tr>
<tr id="row19979111710397"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p397941793916"><a name="p397941793916"></a><a name="p397941793916"></a>id</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p0979181743915"><a name="p0979181743915"></a><a name="p0979181743915"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p19979917163911"><a name="p19979917163911"></a><a name="p19979917163911"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p11979121717393"><a name="p11979121717393"></a><a name="p11979121717393"></a>流水线id</p>
</td>
</tr>
<tr id="row69793173393"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p1297912173398"><a name="p1297912173398"></a><a name="p1297912173398"></a>group_id</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p1597916178393"><a name="p1597916178393"></a><a name="p1597916178393"></a>Int</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p10980141719392"><a name="p10980141719392"></a><a name="p10980141719392"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p5980141715392"><a name="p5980141715392"></a><a name="p5980141715392"></a>流水线组id</p>
</td>
</tr>
<tr id="row2980817123918"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p498071716396"><a name="p498071716396"></a><a name="p498071716396"></a>group_name</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p498041773912"><a name="p498041773912"></a><a name="p498041773912"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p598031743912"><a name="p598031743912"></a><a name="p598031743912"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p39807171399"><a name="p39807171399"></a><a name="p39807171399"></a>流水线组名</p>
</td>
</tr>
<tr id="row19980101743911"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p498021716396"><a name="p498021716396"></a><a name="p498021716396"></a>description</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p4980417103920"><a name="p4980417103920"></a><a name="p4980417103920"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p29800173398"><a name="p29800173398"></a><a name="p29800173398"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p79801717203919"><a name="p79801717203919"></a><a name="p79801717203919"></a>流水线描述</p>
</td>
</tr>
<tr id="row18980317133910"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p1798001719398"><a name="p1798001719398"></a><a name="p1798001719398"></a>pre_operation</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p189802017193918"><a name="p189802017193918"></a><a name="p189802017193918"></a>PreOperation</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p498071753917"><a name="p498071753917"></a><a name="p498071753917"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p09811617173914"><a name="p09811617173914"></a><a name="p09811617173914"></a>可修改，见创建参数</p>
</td>
</tr>
<tr id="row14981151711397"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p1798111174395"><a name="p1798111174395"></a><a name="p1798111174395"></a>params</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p18981101719396"><a name="p18981101719396"></a><a name="p18981101719396"></a>[]Param</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p5981117143910"><a name="p5981117143910"></a><a name="p5981117143910"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p998181723914"><a name="p998181723914"></a><a name="p998181723914"></a>可修改，见创建参数</p>
</td>
</tr>
<tr id="row17981181783916"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p29811917193911"><a name="p29811917193911"></a><a name="p29811917193911"></a>stages</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p49811117103915"><a name="p49811117103915"></a><a name="p49811117103915"></a>[]Stage</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p17981201743916"><a name="p17981201743916"></a><a name="p17981201743916"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p598181773917"><a name="p598181773917"></a><a name="p598181773917"></a>可修改</p>
</td>
</tr>
</tbody>
</table>

**表 4**  Stage参数说明

<a name="table0912151593919"></a>
<table><thead align="left"><tr id="row5982191713916"><th class="cellrowborder" valign="top" width="17.349999999999998%" id="mcps1.2.5.1.1"><p id="p1898211733914"><a name="p1898211733914"></a><a name="p1898211733914"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="12.24%" id="mcps1.2.5.1.2"><p id="p0982161712390"><a name="p0982161712390"></a><a name="p0982161712390"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="15.310000000000002%" id="mcps1.2.5.1.3"><p id="p15982101715399"><a name="p15982101715399"></a><a name="p15982101715399"></a>必选</p>
</th>
<th class="cellrowborder" valign="top" width="55.1%" id="mcps1.2.5.1.4"><p id="p189821017123917"><a name="p189821017123917"></a><a name="p189821017123917"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row129821317203913"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p99820174399"><a name="p99820174399"></a><a name="p99820174399"></a>name</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p109821417113916"><a name="p109821417113916"></a><a name="p109821417113916"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p398219178392"><a name="p398219178392"></a><a name="p398219178392"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p1198212170397"><a name="p1198212170397"></a><a name="p1198212170397"></a>见创建参数</p>
</td>
</tr>
<tr id="row129821175399"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p169827170395"><a name="p169827170395"></a><a name="p169827170395"></a>id</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p8982417183911"><a name="p8982417183911"></a><a name="p8982417183911"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p1982121713395"><a name="p1982121713395"></a><a name="p1982121713395"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p598318173396"><a name="p598318173396"></a><a name="p598318173396"></a>步骤id，有id为更新已有stage，无id为新增stage</p>
</td>
</tr>
<tr id="row3983161753913"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p18983151763918"><a name="p18983151763918"></a><a name="p18983151763918"></a>exception_handler</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p5983131716399"><a name="p5983131716399"></a><a name="p5983131716399"></a>ExceptionHandler</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p99831017153910"><a name="p99831017153910"></a><a name="p99831017153910"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p15983817153911"><a name="p15983817153911"></a><a name="p15983817153911"></a>可更新，见创建参数</p>
</td>
</tr>
<tr id="row1998331719394"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p898341713392"><a name="p898341713392"></a><a name="p898341713392"></a>input_resources</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p598341753919"><a name="p598341753919"></a><a name="p598341753919"></a>[]Resource</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p7983121713912"><a name="p7983121713912"></a><a name="p7983121713912"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p169831617103918"><a name="p169831617103918"></a><a name="p169831617103918"></a>可更新，见创建参数</p>
</td>
</tr>
<tr id="row398314172393"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p18983417203917"><a name="p18983417203917"></a><a name="p18983417203917"></a>output_resources</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p3983717143914"><a name="p3983717143914"></a><a name="p3983717143914"></a>[]Resource</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p798321753917"><a name="p798321753917"></a><a name="p798321753917"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p898311174391"><a name="p898311174391"></a><a name="p898311174391"></a>可更新，见创建参数</p>
</td>
</tr>
<tr id="row13983161713916"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p1298311175399"><a name="p1298311175399"></a><a name="p1298311175399"></a>pre_operation</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p398361703916"><a name="p398361703916"></a><a name="p398361703916"></a>PreOperation</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p698371753914"><a name="p698371753914"></a><a name="p698371753914"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p9983617163911"><a name="p9983617163911"></a><a name="p9983617163911"></a>可更新，见创建参数</p>
</td>
</tr>
<tr id="row1498311172398"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p17983191710392"><a name="p17983191710392"></a><a name="p17983191710392"></a>post_operation</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p1398315179398"><a name="p1398315179398"></a><a name="p1398315179398"></a>PostOperation</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p1898361717397"><a name="p1898361717397"></a><a name="p1898361717397"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p298331715395"><a name="p298331715395"></a><a name="p298331715395"></a>可更新，见创建参数</p>
</td>
</tr>
<tr id="row29831817123918"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p11983151773911"><a name="p11983151773911"></a><a name="p11983151773911"></a>service_name</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p1198314176393"><a name="p1198314176393"></a><a name="p1198314176393"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p14983517153910"><a name="p14983517153910"></a><a name="p14983517153910"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p5983417103914"><a name="p5983417103914"></a><a name="p5983417103914"></a>不可更新，见创建参数</p>
</td>
</tr>
<tr id="row1798581717398"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p199858179395"><a name="p199858179395"></a><a name="p199858179395"></a>params</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.2 "><p id="p1985141711399"><a name="p1985141711399"></a><a name="p1985141711399"></a>Dict</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p17985417163919"><a name="p17985417163919"></a><a name="p17985417163919"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="55.1%" headers="mcps1.2.5.1.4 "><p id="p12985171733910"><a name="p12985171733910"></a><a name="p12985171733910"></a>可更新，见创建参数</p>
</td>
</tr>
</tbody>
</table>

**请求示例**

```
description: ""
group_id: 812
group_name: default
id: 29476
name: test4
params:
- description: test
  name: test
  value: ""
pre_operation:
  operator: and
  triggers:
  - webhook:
      url: https://registry.southchina.huaweicloud.com/v2/manage/webhooks/7648d0fe-93f4-440e-ad0f-0e095b60066d
stages:
- exception_handler:
    params:
      timespan: 72
    type: timeout_reset
  id: 31646
  name: 代码获取
  params:
    branch: master
    git_type: gitee
    url: https://gitee.com/hwcloudswr/demo-2048.git
  service_name: code_source
- exception_handler:
    params:
      timespan: 72
    type: timeout_reset
  id: 31647
  input_resources:
  - description: 代码源
    name: codeSource
    params:
      stage_index: "0"
    type: code_source
  name: 代码编译
  output_resources:
  - description: ""
    name: sss
    params:
      file_path: aa
      local_file_path: target/SpringBoot-0.0.1-SNAPSHOT.war
      namespace: dsfdsfds
      package: pkg
      version: ver
    type: package
  params:
    basic_env: java
    jenkins_shell: mvn package
  service_name: jenkins_build
- exception_handler:
    params:
      timespan: 72
    type: timeout_reset
  id: 31648
  input_resources:
  - description: 待构建的软件包地址
    name: sourcePackage
    params:
      namespace: dsfdsfds
      package: pkg
      version: ver
    type: package
  name: 镜像构建
  output_resources:
  - description: 归档的镜像地址
    name: image
    params:
      namespace: root
      repository: sdfasdfa
      tag: asdfas.5
    type: image
  params:
    dockerfile_content: |-
      FROM ubuntu
      RUN echo hello
  service_name: dockerfile_build
```

## 响应消息<a name="section869516183919"></a>

**响应参数**

**表 5**  响应参数

<a name="table167191613918"></a>
<table><thead align="left"><tr id="row4989161713390"><th class="cellrowborder" valign="top" width="20.200000000000003%" id="mcps1.2.4.1.1"><p id="p696211175392"><a name="p696211175392"></a><a name="p696211175392"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="15.15%" id="mcps1.2.4.1.2"><p id="p19962191717391"><a name="p19962191717391"></a><a name="p19962191717391"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="64.64999999999999%" id="mcps1.2.4.1.3"><p id="p996210179396"><a name="p996210179396"></a><a name="p996210179396"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row10989131743918"><td class="cellrowborder" valign="top" width="20.200000000000003%" headers="mcps1.2.4.1.1 "><p id="p20962111719397"><a name="p20962111719397"></a><a name="p20962111719397"></a>name</p>
<p id="p1896251715396"><a name="p1896251715396"></a><a name="p1896251715396"></a>id</p>
<p id="p19964517143916"><a name="p19964517143916"></a><a name="p19964517143916"></a>group_id</p>
<p id="p996431793911"><a name="p996431793911"></a><a name="p996431793911"></a>group_name</p>
<p id="p1496451723916"><a name="p1496451723916"></a><a name="p1496451723916"></a>description</p>
<p id="p13964131763913"><a name="p13964131763913"></a><a name="p13964131763913"></a>pre_operation</p>
<p id="p1396471719393"><a name="p1396471719393"></a><a name="p1396471719393"></a>params</p>
<p id="p10964181713394"><a name="p10964181713394"></a><a name="p10964181713394"></a>stages</p>
</td>
<td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p596201793920"><a name="p596201793920"></a><a name="p596201793920"></a>string</p>
<p id="p18962151773918"><a name="p18962151773918"></a><a name="p18962151773918"></a>int</p>
<p id="p19964717123916"><a name="p19964717123916"></a><a name="p19964717123916"></a>Int</p>
<p id="p8964171713391"><a name="p8964171713391"></a><a name="p8964171713391"></a>string</p>
<p id="p129642017123912"><a name="p129642017123912"></a><a name="p129642017123912"></a>string</p>
<p id="p796411763917"><a name="p796411763917"></a><a name="p796411763917"></a>PreOperation</p>
<p id="p796411793917"><a name="p796411793917"></a><a name="p796411793917"></a>[]Param</p>
<p id="p79648178391"><a name="p79648178391"></a><a name="p79648178391"></a>[]Stage</p>
</td>
<td class="cellrowborder" valign="top" width="64.64999999999999%" headers="mcps1.2.4.1.3 "><p id="p8962171715392"><a name="p8962171715392"></a><a name="p8962171715392"></a>流水线名</p>
<p id="p179621171399"><a name="p179621171399"></a><a name="p179621171399"></a>流水线id</p>
<p id="p196414179394"><a name="p196414179394"></a><a name="p196414179394"></a>流水线组id</p>
<p id="p2964151733913"><a name="p2964151733913"></a><a name="p2964151733913"></a>流水线组名</p>
<p id="p0964717123915"><a name="p0964717123915"></a><a name="p0964717123915"></a>流水线描述</p>
<p id="p5964417103919"><a name="p5964417103919"></a><a name="p5964417103919"></a>流水线执行的前置操作，见创建参数</p>
<p id="p5964181711397"><a name="p5964181711397"></a><a name="p5964181711397"></a>流水线全局变量，见创建参数</p>
<p id="p19964191719393"><a name="p19964191719393"></a><a name="p19964191719393"></a>流水线的执行步骤</p>
</td>
</tr>
</tbody>
</table>

**响应示例**

```
description: ""
group_id: 812
group_name: default
id: 29476
name: test4
params:
- description: test
  name: test
  value: ""
pre_operation:
  operator: and
  triggers:
  - webhook:
      url: https://registry.southchina.huaweicloud.com/v2/manage/webhooks/7648d0fe-93f4-440e-ad0f-0e095b60066d
stages:
- exception_handler:
    params:
      timespan: 72
    type: timeout_reset
  id: 31646
  name: 代码获取
  params:
    branch: master
    git_type: gitee
    url: https://gitee.com/hwcloudswr/demo-2048.git
  service_name: code_source
- exception_handler:
    params:
      timespan: 72
    type: timeout_reset
  id: 31647
  input_resources:
  - description: 代码源
    name: codeSource
    params:
      stage_index: "0"
    type: code_source
  name: 代码编译
  output_resources:
  - description: ""
    name: sss
    params:
      file_path: aa
      local_file_path: target/SpringBoot-0.0.1-SNAPSHOT.war
      namespace: dsfdsfds
      package: pkg
      version: ver
    type: package
  params:
    basic_env: java
    jenkins_shell: mvn package
  service_name: jenkins_build
- exception_handler:
    params:
      timespan: 72
    type: timeout_reset
  id: 31648
  input_resources:
  - description: 待构建的软件包地址
    name: sourcePackage
    params:
      namespace: dsfdsfds
      package: pkg
      version: ver
    type: package
  name: 镜像构建
  output_resources:
  - description: 归档的镜像地址
    name: image
    params:
      namespace: root
      repository: sdfasdfa
      tag: asdfas.5
    type: image
  params:
    dockerfile_content: |-
      FROM ubuntu
      RUN echo hello
  service_name: dockerfile_build
```

## 状态码<a name="section15102131616397"></a>

**表 6**  状态码

<a name="table21021816123914"></a>
<table><thead align="left"><tr id="row599161773916"><th class="cellrowborder" valign="top" width="16.16%" id="mcps1.2.3.1.1"><p id="p1799161717399"><a name="p1799161717399"></a><a name="p1799161717399"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="83.84%" id="mcps1.2.3.1.2"><p id="p159911017143915"><a name="p159911017143915"></a><a name="p159911017143915"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row49918179394"><td class="cellrowborder" valign="top" width="16.16%" headers="mcps1.2.3.1.1 "><p id="p59913179392"><a name="p59913179392"></a><a name="p59913179392"></a>201</p>
</td>
<td class="cellrowborder" valign="top" width="83.84%" headers="mcps1.2.3.1.2 "><p id="p1099191711393"><a name="p1099191711393"></a><a name="p1099191711393"></a>创建成功</p>
</td>
</tr>
<tr id="row9991121712395"><td class="cellrowborder" valign="top" width="16.16%" headers="mcps1.2.3.1.1 "><p id="p79917173397"><a name="p79917173397"></a><a name="p79917173397"></a>400</p>
</td>
<td class="cellrowborder" valign="top" width="83.84%" headers="mcps1.2.3.1.2 "><p id="p1899117171396"><a name="p1899117171396"></a><a name="p1899117171396"></a>错误的请求</p>
</td>
</tr>
<tr id="row2991191753915"><td class="cellrowborder" valign="top" width="16.16%" headers="mcps1.2.3.1.1 "><p id="p599141793918"><a name="p599141793918"></a><a name="p599141793918"></a>401</p>
</td>
<td class="cellrowborder" valign="top" width="83.84%" headers="mcps1.2.3.1.2 "><p id="p11991191717399"><a name="p11991191717399"></a><a name="p11991191717399"></a>鉴权失败</p>
</td>
</tr>
<tr id="row79911017193911"><td class="cellrowborder" valign="top" width="16.16%" headers="mcps1.2.3.1.1 "><p id="p499113171399"><a name="p499113171399"></a><a name="p499113171399"></a>500</p>
</td>
<td class="cellrowborder" valign="top" width="83.84%" headers="mcps1.2.3.1.2 "><p id="p1099151723919"><a name="p1099151723919"></a><a name="p1099151723919"></a>内部错误</p>
</td>
</tr>
</tbody>
</table>

